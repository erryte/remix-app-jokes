import{a as b}from"/build/_shared/chunk-XYRB6XSM.js";import{a as f}from"/build/_shared/chunk-CWOGSDJQ.js";import{a as k}from"/build/_shared/chunk-QVTEGN3F.js";import{a as E}from"/build/_shared/chunk-PGOH7JLP.js";import{a as y}from"/build/_shared/chunk-VAWQIAN7.js";import{b as i,d as s,e as l,g as d,i as m,n as u,q as c}from"/build/_shared/chunk-FXYY623G.js";import{c as o}from"/build/_shared/chunk-Q3IECNXJ.js";var p=o(E(),1);var h=o(y(),1),w=o(b(),1),g=o(k(),1),r=o(c(),1);function j(e){if(e.length<10)return"That joke is too short"}function N(e){if(e.length<3)return"That joke's name is too short"}function v(){let e=u(),t=s();if(t.formData){let n=t.formData.get("content"),a=t.formData.get("name");if(typeof n=="string"&&typeof a=="string"&&!j(n)&&!N(a))return(0,r.jsx)(f,{canDelete:!1,isOwner:!0,joke:{name:a,content:n}})}return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Add your own hilarious joke"}),(0,r.jsxs)(d,{method:"post",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{children:["Name:"," ",(0,r.jsx)("input",{defaultValue:e?.fields?.name,name:"name",type:"text","aria-invalid":Boolean(e?.fieldErrors?.name),"aria-errormessage":e?.fieldErrors?.name?"name-error":void 0})]}),e?.fieldErrors?.name?(0,r.jsx)("p",{className:"form-validation-error",id:"name-error",role:"alert",children:e.fieldErrors.name}):null]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{children:["Content:"," ",(0,r.jsx)("textarea",{defaultValue:e?.fields?.content,name:"content","aria-invalid":Boolean(e?.fieldErrors?.content),"aria-errormessage":e?.fieldErrors?.content?"content-error":void 0})]}),e?.fieldErrors?.content?(0,r.jsx)("p",{className:"form-validation-error",id:"content-error",role:"alert",children:e.fieldErrors.content}):null]}),(0,r.jsxs)("div",{children:[e?.formError?(0,r.jsx)("p",{className:"form-validation-error",role:"alert",children:e.formError}):null,(0,r.jsx)("button",{type:"submit",className:"button",children:"Add"})]})]})]})}function A(){let e=l();return console.error(e),i(e)&&e.status===401?(0,r.jsxs)("div",{className:"error-container",children:[(0,r.jsx)("p",{children:"You must be logged in to create a joke."}),(0,r.jsx)(m,{to:"/login",children:"Login"})]}):(0,r.jsx)("div",{className:"error-container",children:"Something unexpected went wrong. Sorry about that."})}export{A as ErrorBoundary,v as default};
